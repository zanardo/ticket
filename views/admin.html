%rebase base title="Administrar", filter="", username=username, userisadmin=userisadmin, version=version

<h2>Usuários</h2>
<form method="post" action="/admin/save-new-user" enctype="multipart/form-data">
	<input type="text" name="username" size="30">
	<input type="submit" name="submit" value="novo usuário">
</form>
<p>
<table>
	<th>usuário</th><th>administrador</th><th>ações</th>
	%for user in users:
		<tr>
			<td> {{user['username']}} </td>
			<td>
				%if user['is_admin']:
					sim
				%else:
					não
				%end
			</td>
			<td>
				%if username != user['username']:
					<a href="/admin/remove-user/{{user['username']}}">excluir</a>
					<a href="/admin/force-new-password/{{user['username']}}">forçar nova senha</a>
				%end
			</td>
		</tr>
	%end
</table>

<h2>Configurações</h2>
<form method="post" action="/admin/save-config" enctype="multipart/form-data">
	<input type="text" size="40" name="mail.from" value="{{ config['mail.from'] }}">
	<tt>mail.from</tt> (Endereço de e-mail do remetente)
	<p>

	<input type="text" size="40" name="mail.smtp" value="{{ config['mail.smtp'] }}">
	<tt>mail.smtp</tt> (Servidor SMTP para envio de e-mail)

	<p>
	<input type="submit" name="submit" value="salvar configurações">
</form>

<h2>Manutenção</h2>
<a href="/admin/reindex-fts">Recria índices de busca</a>: Utilizar
caso você tenha modificado dados diretamente no banco de dados (exemplo: importação de dados
de outros sistemas ou após atualizações de versão que exijam esta rotina).